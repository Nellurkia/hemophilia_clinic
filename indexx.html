<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>血友病患者诊所地图</title>
    <!-- 引入高德地图的API脚本，替换 YOUR_API_KEY 为你申请的高德地图API Key -->
    <script src="https://webapi.amap.com/maps?v=2.0&key=7ecaf88eca30374b4ae8fecf125f2d5a"></script>
    <style>
        /* 设置地图容器的大小 */
        #container {
            width: 100%;
            height: 600px;
        }
    </style>
</head>
<body>
    <h2>血友病患者注射诊所地图</h2>
    <div id="container"></div>
    <script>
        // 获取用户当前的地理位置
        navigator.geolocation.getCurrentPosition(function(position) {
            // 用户当前的经纬度
            var userLongitude = position.coords.longitude;
            var userLatitude = position.coords.latitude;

            // 初始化地图
            var map = new AMap.Map('container', {
                zoom: 10, // 缩放等级
                center: [userLongitude, userLatitude], // 设置中心为用户的位置
                view: new AMap.View2D({ // 设置地图显示视图
                    center: [userLongitude, userLatitude],
                    zoom: 10
                })
            });

            // 添加诊所标注
            var clinics = [
                {name: '诊所A', longitude: 116.397428, latitude: 39.90923},
                {name: '诊所B', longitude: 116.406428, latitude: 39.91823},
                // 更多诊所信息
            ];

            clinics.forEach(function(clinic) {
                var marker = new AMap.Marker({
                    position: [clinic.longitude, clinic.latitude],
                    map: map,
                    title: clinic.name
                });

                // 计算用户与诊所之间的距离
                var distance = AMap.GeometryUtil.distance(
                    [userLongitude, userLatitude],
                    [clinic.longitude, clinic.latitude]
                );

                // 在标注旁显示诊所名称和距离
                marker.setLabel({
                    content: `${clinic.name} - 距离 ${distance.toFixed(2)} 米`,
                    offset: new AMap.Pixel(20, 20)
                });
            });
        }, function(error) {
            console.error("无法获取当前位置：", error);
        });
    </script>
</body>
</html>
